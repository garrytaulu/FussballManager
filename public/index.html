<!DOCTYPE html>
<html ng-app="fm">
<head>
    <title>Fussball Manager</title>

    <style>
        form label { display: inline-block; width: 80px; }
        .container { display: inline-block; vertical-align: top; padding: 10px; }
        .resourceId { display:inline-block; visibility:hidden;}
    </style>
</head>
<body ng-controller="MainCtrl">

<h1>Index of Fussball Manager application</h1>

<div ng-controller="PlayerDetailCtrl" class="container">
    <h2>Players</h2>
    <div>
        <button type="button" ng-click="create()">Create</button>
    </div>

    <form name="playerForm" ng-submit="save()" ng-hide="playerEdit == null">
        <fieldset>
            <div>
                <label for="playerName">Name: </label><input id="playerName" type="text" ng-model="playerEdit.name" required/>
            </div>
            <div>
                <label for="nickname">Nickname: </label><input id="nickname" type="text" ng-model="playerEdit.nickname" required/>
            </div>
            <div>
                <label for="avatar">Avatar: </label><input id="avatar" type="text" ng-model="playerEdit.avatar" required ng-pattern="/.png$/"/>
            </div>
            <button type="submit">Save</button>
            <button type="button" ng-click="cancel()">Cancel</button>
        </fieldset>
    </form>

    <ol>
        <li ng-repeat="player in players">
            <div>{{ player | playerDisplay }}</div>
            <a title="Edit" href="" ng-click="edit($index)">Edit</a>
            <a title="Delete" href="" ng-click="delete($index, player)">Delete</a>
        </li>
    </ol>
</div>

<div ng-controller="TeamDetailCtrl" class="container">
    <h2>Teams</h2>
    <div>
        <button type="button" ng-click="create()">Create</button>
    </div>

    <form name="teamForm" ng-submit="save()" ng-hide="teamEdit == null" ng-cloak>
        <fieldset>
            <div>
                <label for="teamName">Name: </label><input id="teamName" type="text" ng-model="teamEdit.name" required />
            </div>
            <div>
                <label for="offense">Offense: </label>
                <select id="offense" ng-model="teamEdit.offense" ng-options="player.id as player.nickname for player in availablePlayers" required></select>
            </div>
            <div>
                <label for="defense">Defense: </label>
                <select id="defense" ng-model="teamEdit.defense" ng-options="player.id as player.nickname for player in availablePlayers" required></select>
            </div>
            <button type="submit">Save</button>
            <button type="button" ng-click="cancel()">Cancel</button>
        </fieldset>
    </form>

    <ol>
        <li ng-repeat="team in teams">
            <div>{{ team | teamDisplay }}</div>
            <a title="Edit" href="" ng-click="edit($index)">Edit</a>
            <a title="Delete" href="" ng-click="delete($index, team)">Delete</a>
        </li>
    </ol>
</div>

<div ng-controller="GameDetailCtrl" class="container">
    <h2>Games</h2>
    <div>
        <button type="button" ng-click="create()">Create</button>
    </div>

    <form name="gameForm" ng-submit="save()" ng-hide="gameEdit == null" ng-cloak>
        <fieldset>
            <div>
                <label for="blueTeam">Blue Team: </label>
                <select id="blueTeam" ng-model="gameEdit.blueTeam" ng-options="team.id as team.name for team in availableTeams" required></select>
            </div>
            <div>
                <label for="redTeam">Red Team: </label>
                <select id="redTeam" ng-model="gameEdit.redTeam" ng-options="team.id as team.name for team in availableTeams" required></select>
            </div>
            <button type="submit">Save</button>
            <button type="button" ng-click="cancel()">Cancel</button>
        </fieldset>
    </form>

    <ol>
        <table cellspacing="0" cellpadding="3" border="0">
            <thead>
                <tr>
                    <td>#</td>
                    <td>Blue Team</td>
                    <td>Red Team</td>
                    <td>Score</td>
                    <td>Actions</td>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="game in games">
                    <td>
                        <span>{{ $index + 1 }}.</span>
                        <span class="resourceId">{{ game.id }}</span>
                    </td>
                    <td>{{ game.blueTeam.name }}</td>
                    <td>{{ game.redTeam.name }}</td>
                    <td>//TODO</td>
                    <td>
                        <span><a title="Edit" href="" ng-click="edit($index)">Edit</a></span>
                        <span><a title="Delete" href="" ng-click="delete($index, game)">Delete</a></span>
                    </td>
                </tr>
            </tbody>

            <!--<li ng-repeat="game in games">
                <div>
                    <span class="resourceId">{{ game.id }}</span>
                    {{ game | gameDisplay }}
                </div>
            </li>-->
        </table>
    </ol>
</div>

<script type="text/javascript" src="js/main.js"></script>
<script type="text/javascript" src="lib/angular.js"></script>
<script type="text/javascript" src="lib/angular-resource.js"></script>
<script type="text/javascript" src="js/app.js"></script>
<script type="text/javascript" src="js/controllers.js"></script>
<script type="text/javascript" src="js/directives.js"></script>
<script type="text/javascript" src="js/filters.js"></script>
<script type="text/javascript" src="js/services.js"></script>
</body>
</html>